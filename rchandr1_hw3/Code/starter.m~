%% Question 1

clc
clear all
close all

% Read in image
I2 = im2double(rgb2gray(imread('../Images/Brain.jpg')));
I = I2;
% Setting Parameters%   delta_t = 1/7;
K = 20;
prompt = 'Which variant do you want to run? ';
variant = 1;
lambda = 0.01;
iter = 20;


% 2D sameolution masks - finite differenc_easts.
masks = get_masks();


% Anisotropic diffusion.
for t = 1:iter
    fprintf('Iteration %d\n',t);
    
    % Finite differenc_easts. [conv2(.,.,'same') can be replac_eastd by conv2(.,.,'same')]
    dels = get_deltas(I2, masks);
   
    
    % Diffusion function.
    if option == 1
        c = get_c_1(dels, K);
        
    elseif option == 2
        c = get_c_2(dels, K);
        
    end
    sum = 0;
    for i = 1:8
        sum = sum + c{i}.*dels{i};
    end
    I = I + lambda*sum;
    
end

subplot(1,2,1)
imshow(I2)
subplot(1,2,2)
imshow(I)
